var x = '[{"name":"履历","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"root","nodeName":"folder","children":[{"name":"履历材料","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"履历材料2","filePic":2,"index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed7701","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2423","filename":"00fb271b8b4c3e0220180703142657001.jpg","materialindex":"1","materialtype":"0101","materialname":"履历材料2","picstate":"0"},{"name":"第2页","filePic":"","index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed7702","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2399","filename":"00fb271b8b4c3e0220180703142657002.jpg","materialindex":"2","materialtype":"0101","materialname":"履历材料2","picstate":"0"}]},{"name":"履历材料1","filePic":1,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"3","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed7700","parent":"folder","nodeName":"img","imgWidth":"1655","imgHeight":"2384","filename":"00fb271b8b4c3e0220180703142657000.jpg","materialindex":"1","materialtype":"0101","materialname":"履历材料1","picstate":"0"}]}]}]},{"name":"自传","filePic":"","index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"root","nodeName":"folder","children":[{"name":"自传材料","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"自传材料3","filePic":2,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"4","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed7703","parent":"folder","nodeName":"img","imgWidth":"1655","imgHeight":"2387","filename":"00fb271b8b4c3e0220180703143027000.jpg","materialindex":"1","materialtype":"0201","materialname":"自传材料3","picstate":"0"},{"name":"第2页","filePic":"","index":"5","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed7704","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2415","filename":"00fb271b8b4c3e0220180703143027001.jpg","materialindex":"2","materialtype":"0201","materialname":"自传材料3","picstate":"0"}]}]},{"name":"","filePic":"","index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"报告个人有关事项2","filePic":3,"index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"6","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed8600","parent":"folder","nodeName":"img","imgWidth":"1664","imgHeight":"2420","filename":"00fb271b8b4c3e0220180703143027003.jpg","materialindex":"1","materialtype":"0202","materialname":"报告个人有关事项2","picstate":"0"},{"name":"第2页","filePic":"","index":"7","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed8601","parent":"folder","nodeName":"img","imgWidth":"1660","imgHeight":"2397","filename":"00fb271b8b4c3e0220180703143027004.jpg","materialindex":"2","materialtype":"0202","materialname":"报告个人有关事项2","picstate":"0"},{"name":"第3页","filePic":"","index":"8","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed8602","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2421","filename":"00fb271b8b4c3e0220180703143027005.jpg","materialindex":"3","materialtype":"0202","materialname":"报告个人有关事项2","picstate":"0"}]},{"name":"报告个人有关事项1","filePic":1,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"9","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed7705","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2391","filename":"00fb271b8b4c3e0220180703143027002.jpg","materialindex":"1","materialtype":"0202","materialname":"报告个人有关事项1","picstate":"0"}]}]}]},{"name":"学历学位、职称","filePic":"","index":"3","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"root","nodeName":"folder","children":[{"name":"学历学位材料","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"学历学位材料1","filePic":2,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"10","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9600","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2402","filename":"00fb271b8b4c3e0220180703143027006.jpg","materialindex":"1","materialtype":"0401","materialname":"学历学位材料1","picstate":"0"},{"name":"第2页","filePic":"","index":"11","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9601","parent":"folder","nodeName":"img","imgWidth":"1661","imgHeight":"2419","filename":"00fb271b8b4c3e0220180703143027007.jpg","materialindex":"2","materialtype":"0401","materialname":"学历学位材料1","picstate":"0"}]}]},{"name":"科研学术水平材料","filePic":"","index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"评（聘）专业技术职称（职务）材料2","filePic":2,"index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"12","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9604","parent":"folder","nodeName":"img","imgWidth":"1659","imgHeight":"2385","filename":"00fb271b8b4c3e0220180703143027010.jpg","materialindex":"1","materialtype":"0403","materialname":"评（聘）专业技术职称（职务）材料2","picstate":"0"},{"name":"第2页","filePic":"","index":"13","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9605","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2412","filename":"00fb271b8b4c3e0220180703143027011.jpg","materialindex":"2","materialtype":"0403","materialname":"评（聘）专业技术职称（职务）材料2","picstate":"0"}]},{"name":"评（聘）专业技术职称（职务）材料1","filePic":2,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"14","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9602","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2395","filename":"00fb271b8b4c3e0220180703143027008.jpg","materialindex":"1","materialtype":"0403","materialname":"评（聘）专业技术职称（职务）材料1","picstate":"0"},{"name":"第2页","filePic":"","index":"15","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9603","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2413","filename":"00fb271b8b4c3e0220180703143027009.jpg","materialindex":"2","materialtype":"0403","materialname":"评（聘）专业技术职称（职务）材料1","picstate":"0"}]}]}]},{"name":"政审历史审查","filePic":"","index":"4","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"root","nodeName":"folder","children":[{"name":"政审材料","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"政审材料1","filePic":1,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"16","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9606","parent":"folder","nodeName":"img","imgWidth":"1659","imgHeight":"2387","filename":"00fb271b8b4c3e0220180703143027012.jpg","materialindex":"1","materialtype":"0501","materialname":"政审材料1","picstate":"0"}]}]}]},{"name":"党、团","filePic":"","index":"5","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"root","nodeName":"folder","children":[{"name":"入团、入党材料","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"党、团组织建设工作中形成的材料1","filePic":1,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"17","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9607","parent":"folder","nodeName":"img","imgWidth":"1665","imgHeight":"2413","filename":"00fb271b8b4c3e0220180703143027013.jpg","materialindex":"1","materialtype":"0601","materialname":"党、团组织建设工作中形成的材料1","picstate":"0"}]},{"name":"党、团组织建设工作中形成的材料2","filePic":1,"index":"2","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"18","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9608","parent":"folder","nodeName":"img","imgWidth":"1659","imgHeight":"2389","filename":"00fb271b8b4c3e0220180703143027014.jpg","materialindex":"1","materialtype":"0601","materialname":"党、团组织建设工作中形成的材料2","picstate":"0"}]},{"name":"党、团组织建设工作中形成的材料3","filePic":3,"index":"3","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"19","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed9609","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2411","filename":"00fb271b8b4c3e0220180703143027015.jpg","materialindex":"1","materialtype":"0601","materialname":"党、团组织建设工作中形成的材料3","picstate":"0"},{"name":"第2页","filePic":"","index":"20","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed960a","parent":"folder","nodeName":"img","imgWidth":"1659","imgHeight":"2385","filename":"00fb271b8b4c3e0220180703143027016.jpg","materialindex":"2","materialtype":"0601","materialname":"党、团组织建设工作中形成的材料3","picstate":"0"},{"name":"第3页","filePic":"","index":"21","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed960b","parent":"folder","nodeName":"img","imgWidth":"1663","imgHeight":"2416","filename":"00fb271b8b4c3e0220180703143027017.jpg","materialindex":"3","materialtype":"0601","materialname":"党、团组织建设工作中形成的材料3","picstate":"0"}]}]}]},{"name":"其他","filePic":"","index":"6","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"root","nodeName":"folder","children":[{"name":"行政工资介绍信","filePic":"","index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"健康检查和处理工伤事故材料1","filePic":3,"index":"1","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=undefined","parent":"folder","nodeName":"folder","children":[{"name":"第1页","filePic":"","index":"22","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed960c","parent":"folder","nodeName":"img","imgWidth":"1661","imgHeight":"2387","filename":"00fb271b8b4c3e0220180703143027018.jpg","materialindex":"1","materialtype":"1001","materialname":"健康检查和处理工伤事故材料1","picstate":"0"},{"name":"第2页","filePic":"","index":"23","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed960d","parent":"folder","nodeName":"img","imgWidth":"1664","imgHeight":"2419","filename":"00fb271b8b4c3e0220180703143027019.jpg","materialindex":"2","materialtype":"1001","materialname":"健康检查和处理工伤事故材料1","picstate":"0"},{"name":"第3页","filePic":"","index":"24","url":"http://130.10.8.246:2001/digitalarchive/digitalarchive/acAction.do?method=redirectPic&archiveid=00fb271b8b4c3e02&serialno=00fb2723e08cda00&sitecode=420000&pictureid=fb271bd7ed960e","parent":"folder","nodeName":"img","imgWidth":"1661","imgHeight":"2397","filename":"00fb271b8b4c3e0220180703143027020.jpg","materialindex":"3","materialtype":"1001","materialname":"健康检查和处理工伤事故材料1","picstate":"0"}]}]}]}]';
var obj = JSON.parse(x);

var res = [];
var num = 0;
function getArr(arr) {
	for (var i = 0, j = arr.length; i < j ; i++) {
		var cur = arr[i];
		if (cur.filename) {
			cur.__num = ++ num;
			res.push(cur);
		}
		if (cur.children && cur.children.length > 0) {
			getArr(cur.children);
		}
	}
}
getArr(obj);
console.log(res.length);